### clash_yaml_check
批量检测节点有效性，自动剔除失效节点，并根据延迟自动排序  
可以测试指定的策略组  
可以测试所有策略组  
独立显示每个组的测试结果  
添加了测试结果缓存: 
相同节点在60秒内不会重复测试  
提高了多策略组测试的效率  

### 联通性测试url
| 服务提供者 | 链接 | 大陆体验 | 境外体验 | http/https | IP Version |
|------------|------|----------|----------|-----------|------------|
| Google     | http://www.gstatic.com/generate_204 | 5 | 10 | 204/204 | 4+6 |
| Google     | http://www.google-analytics.com/generate_204 | 6 | 10 | 204/204 | 4+6 |
| Google     | http://www.google.com/generate_204 | 0 | 10 | 204/204 | 4+6 |
| Google     | http://connectivitycheck.gstatic.com/generate_204 | 4 | 10 | 204/204 | 4+6 |
| Apple      | http://captive.apple.com | 3 | 10 | 200/200 | 4+6 |
| Apple🔥    | http://www.apple.com/library/test/success.html | 7 | 10 | 200/200 | 4+6 |
| MicroSoft  | http://www.msftconnecttest.com/connecttest.txt | 5 | 10 | 200/error | 4 |
| Cloudflare  | http://cp.cloudflare.com/ | 4 | 10 | 204/204 | 4+6 |
| Firefox    | http://detectportal.firefox.com/success.txt | 5 | 10 | 200/200 | 4+6 |
| V2ex       | http://www.v2ex.com/generate_204 | 0 | 10 | 204/301 | 4+6 |
| 小米       | http://connect.rom.miui.com/generate_204 | 10 | 4 | 204/204 | 4 |
| 华为       | http://connectivitycheck.platform.hicloud.com/generate_204 | 10 | 5 | 204/204 | 4 |
| Vivo       | http://wifi.vivo.com.cn/generate_204 | 10 | 5 | 204/204 | 4 |

### CLASH API默认端口说明
1. Clash 核心
- Clash Premium: 9090 (遵循配置文件中的external-controller设置)
- Clash Core: 9090 (遵循配置文件设置)

2. Windows 客户端
- Clash for Windows: 9090
- Clash Verge: 9097
- ClashN: 9090
- Fndroid: 9090

3. macOS 客户端
- ClashX: 9090
- ClashX Pro: 9090
- Clash Verge: 9097

4. Linux 客户端
- Clash Verge: 9097
- Clash for Windows: 9090

5. Android 客户端
- ClashForAndroid: 9090

### 使用说明  
添加了命令行参数支持:  
- -c/--config: 指定配置文件路径，默认clash_config.yaml
- -g/--groups: 指定要测试的策略组
- -n/--concurrent: 设置并发数
- -t/--timeout: 设置超时时间
- -u/--url: 设置 API 地址
- -s/--secret: 设置 API secret

使用示例:

测试所有策略组:
```
python check.py
```
测试指定策略组:
```
python check.py -g "自动选择"
```

### 演示效果
```
Clash 节点测试工具
配置文件: clash_config.yaml
API 地址: http://127.0.0.1:9097
并发数量: 100
超时时间: 5秒

将测试以下策略组: 🔰 节点选择, ♻️ 自动选择, 🎥 NETFLIX, ⛔️ 广告拦截, 🚫 运营劫持, 🌍 国外媒体, 🌏 国内媒体, Ⓜ️ 微软服务, 📲 电报信息, 🍎 苹果服务, 🎯 全球直连, 🛑 全球拦截, 🐟 漏网之鱼
成功连接到 Clash API，版本: v1.18.7

======================== 开始测试策略组: 🔰 节点选择 ====================
开始测试 412 个节点 (最大并发: 100)
进度: 412/412 (100.0%)


策略组 '🔰 节点选择' 测试结果:
总节点数: 412
可用节点数: 62
平均延迟: 2586.84ms

延迟最低的前5个节点:
1. 🎯 全球直连: 141.00ms
2. 🇺🇸 美国-拉斯维加斯专线2-1P: 1115.00ms
3. 🇺🇸 美国-拉斯维加斯专线2-1F: 1160.00ms
4. 🇺🇸 美国-拉斯维加斯专线2-1H: 1171.00ms
5. 🇺🇸 美国-拉斯维加斯专线2-1C: 1230.00ms
已更新策略组 '🔰 节点选择' 的节点顺序

======================== 开始测试策略组: ♻️ 自动选择 ====================
开始测试 410 个节点 (最大并发: 100)
进度: 410/410 (100.0%)


策略组 '♻️ 自动选择' 测试结果:
总节点数: 410
可用节点数: 61
平均延迟: 2626.93ms

延迟最低的前5个节点:
1. 🇺🇸 美国-拉斯维加斯专线2-1P: 1115.00ms
2. 🇺🇸 美国-拉斯维加斯专线2-1F: 1160.00ms
3. 🇺🇸 美国-拉斯维加斯专线2-1H: 1171.00ms
4. 🇺🇸 美国-拉斯维加斯专线2-1C: 1230.00ms
5. 🇺🇸 美国-拉斯维加斯专线2-1D: 1343.00ms
已更新策略组 '♻️ 自动选择' 的节点顺序

======================== 开始测试策略组: 🎥 NETFLIX ====================
开始测试 413 个节点 (最大并发: 100)
进度: 413/413 (100.0%)


策略组 '🎥 NETFLIX' 测试结果:
总节点数: 413
可用节点数: 62
平均延迟: 2586.84ms

延迟最低的前5个节点:
1. 🎯 全球直连: 141.00ms
2. 🇺🇸 美国-拉斯维加斯专线2-1P: 1115.00ms
3. 🇺🇸 美国-拉斯维加斯专线2-1F: 1160.00ms
4. 🇺🇸 美国-拉斯维加斯专线2-1H: 1171.00ms
5. 🇺🇸 美国-拉斯维加斯专线2-1C: 1230.00ms
已更新策略组 '🎥 NETFLIX' 的节点顺序

======================== 开始测试策略组: ⛔️ 广告拦截 ====================
开始测试 3 个节点 (最大并发: 100)
进度: 3/3 (100.0%)


策略组 '⛔️ 广告拦截' 测试结果:
总节点数: 3
可用节点数: 1
平均延迟: 141.00ms

延迟最低的前5个节点:
1. 🎯 全球直连: 141.00ms
已更新策略组 '⛔️ 广告拦截' 的节点顺序

======================== 开始测试策略组: 🚫 运营劫持 ====================
开始测试 3 个节点 (最大并发: 100)
进度: 3/3 (100.0%)


策略组 '🚫 运营劫持' 测试结果:
总节点数: 3
可用节点数: 1
平均延迟: 141.00ms

延迟最低的前5个节点:
1. 🎯 全球直连: 141.00ms
已更新策略组 '🚫 运营劫持' 的节点顺序

======================== 开始测试策略组: 🌍 国外媒体 ====================
开始测试 413 个节点 (最大并发: 100)
进度: 413/413 (100.0%)


策略组 '🌍 国外媒体' 测试结果:
总节点数: 413
可用节点数: 62
平均延迟: 2586.84ms

延迟最低的前5个节点:
1. 🎯 全球直连: 141.00ms
2. 🇺🇸 美国-拉斯维加斯专线2-1P: 1115.00ms
3. 🇺🇸 美国-拉斯维加斯专线2-1F: 1160.00ms
4. 🇺🇸 美国-拉斯维加斯专线2-1H: 1171.00ms
5. 🇺🇸 美国-拉斯维加斯专线2-1C: 1230.00ms
已更新策略组 '🌍 国外媒体' 的节点顺序

======================== 开始测试策略组: 🌏 国内媒体 ====================
开始测试 31 个节点 (最大并发: 100)
进度: 31/31 (100.0%)


策略组 '🌏 国内媒体' 测试结果:
总节点数: 31
可用节点数: 1
平均延迟: 141.00ms

延迟最低的前5个节点:
1. 🎯 全球直连: 141.00ms
已更新策略组 '🌏 国内媒体' 的节点顺序

======================== 开始测试策略组: Ⓜ️ 微软服务 ====================
开始测试 412 个节点 (最大并发: 100)
进度: 412/412 (100.0%)


策略组 'Ⓜ️ 微软服务' 测试结果:
总节点数: 412
可用节点数: 62
平均延迟: 2586.84ms

延迟最低的前5个节点:
1. 🎯 全球直连: 141.00ms
2. 🇺🇸 美国-拉斯维加斯专线2-1P: 1115.00ms
3. 🇺🇸 美国-拉斯维加斯专线2-1F: 1160.00ms
4. 🇺🇸 美国-拉斯维加斯专线2-1H: 1171.00ms
5. 🇺🇸 美国-拉斯维加斯专线2-1C: 1230.00ms
已更新策略组 'Ⓜ️ 微软服务' 的节点顺序

======================== 开始测试策略组: 📲 电报信息 ====================
开始测试 412 个节点 (最大并发: 100)
进度: 412/412 (100.0%)


策略组 '📲 电报信息' 测试结果:
总节点数: 412
可用节点数: 62
平均延迟: 2586.84ms

延迟最低的前5个节点:
1. 🎯 全球直连: 141.00ms
2. 🇺🇸 美国-拉斯维加斯专线2-1P: 1115.00ms
3. 🇺🇸 美国-拉斯维加斯专线2-1F: 1160.00ms
4. 🇺🇸 美国-拉斯维加斯专线2-1H: 1171.00ms
5. 🇺🇸 美国-拉斯维加斯专线2-1C: 1230.00ms
已更新策略组 '📲 电报信息' 的节点顺序

======================== 开始测试策略组: 🍎 苹果服务 ====================
开始测试 413 个节点 (最大并发: 100)
进度: 413/413 (100.0%)


策略组 '🍎 苹果服务' 测试结果:
总节点数: 413
可用节点数: 62
平均延迟: 2586.84ms

延迟最低的前5个节点:
1. 🎯 全球直连: 141.00ms
2. 🇺🇸 美国-拉斯维加斯专线2-1P: 1115.00ms
3. 🇺🇸 美国-拉斯维加斯专线2-1F: 1160.00ms
4. 🇺🇸 美国-拉斯维加斯专线2-1H: 1171.00ms
5. 🇺🇸 美国-拉斯维加斯专线2-1C: 1230.00ms
已更新策略组 '🍎 苹果服务' 的节点顺序

======================== 开始测试策略组: 🎯 全球直连 ====================
开始测试 1 个节点 (最大并发: 100)
进度: 1/1 (100.0%)


策略组 '🎯 全球直连' 测试结果:
总节点数: 1
可用节点数: 1
平均延迟: 88.00ms

延迟最低的前5个节点:
1. DIRECT: 88.00ms
已更新策略组 '🎯 全球直连' 的节点顺序

======================== 开始测试策略组: 🛑 全球拦截 ====================
开始测试 2 个节点 (最大并发: 100)
进度: 2/2 (100.0%)


策略组 '🛑 全球拦截' 测试结果:
总节点数: 2
可用节点数: 1
平均延迟: 88.00ms

延迟最低的前5个节点:
1. DIRECT: 88.00ms
已更新策略组 '🛑 全球拦截' 的节点顺序

======================== 开始测试策略组: 🐟 漏网之鱼 ====================
开始测试 413 个节点 (最大并发: 100)
进度: 413/413 (100.0%)


策略组 '🐟 漏网之鱼' 测试结果:
总节点数: 413
可用节点数: 62
平均延迟: 2586.84ms

延迟最低的前5个节点:
1. 🎯 全球直连: 141.00ms
2. 🇺🇸 美国-拉斯维加斯专线2-1P: 1115.00ms
3. 🇺🇸 美国-拉斯维加斯专线2-1F: 1160.00ms
4. 🇺🇸 美国-拉斯维加斯专线2-1H: 1171.00ms
5. 🇺🇸 美国-拉斯维加斯专线2-1C: 1230.00ms
已更新策略组 '🐟 漏网之鱼' 的节点顺序
配置已保存到: clash_config.yaml

总耗时: 18.03 秒
```
